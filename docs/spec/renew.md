承知しました。
絵文字の「振動」と「表情変化」を核にした、**最終決定版の仕様書**を作成しました。
これを実装時の設計図（Design Doc）としてお使いください。

-----

# 📜 仕様書：『開示請求クリッカー（仮）』

**〜その投稿、法的に詰めます〜**

## 1\. プロジェクト概要

  * **コンセプト:** 理不尽なクソリプをしてくる架空のユーザーに対し、「法的措置（開示請求）」ボタンを押すことで、圧倒的な力でねじ伏せ、怯えさせるカタルシスを提供する。
  * **コア体験:** **「煽り（ムカつき）」→「ボタン押下（制裁）」→「怯え・振動（スッキリ）」** という感情のジェットコースター。
  * **開発期間:** 1日（ワンデイ開発想定）

## 2\. 技術スタック

  * **Frontend:** Next.js (App Router), React
  * **Styling:** Tailwind CSS
  * **AI:** Gemini API or OpenAI API (JSON Mode)
  * **Deployment:** Vercel

## 3\. 画面・UI仕様

### A. メイン画面レイアウト

スマホ・PC両対応のシングルカラム（X/Twitter風UI）。

1.  **投稿エリア**

      * テキストエリア + 「投稿する」ボタン。
      * 送信後、ローディング（「クソリプ収集中...」）を経てタイムラインが更新される。

2.  **タイムライン（リプライリスト）**

      * ユーザーの投稿に対し、3〜5件のクソリプが連なる。

### B. リプライアイテムの構成

各リプライは以下の要素を持つ。

| 要素 | 通常時（煽りフェーズ） | 開示請求後（屈服フェーズ） |
| :--- | :--- | :--- |
| **アイコン** | **煽り絵文字** (😈, 🤪, 😤) | **怯え絵文字** (🥶, 😱, 🥺) |
| **動き** | 静止（たまに少し揺れる程度） | **激しく振動 (Vibration)** |
| **名前** | 「裏垢男子」「ご意見番」など | (変更なし) |
| **本文** | 攻撃的で理不尽な内容 | 必死の謝罪、命乞い |
| **ボタン** | **[🚨 開示請求する]** (赤色) | **[✅ 示談成立]** (緑色・非活性) |

## 4\. 演出・アニメーション仕様（重要）

### ① 絵文字の表情変化ロジック

LLMからのレスポンスに基づき、状態（State）に応じて絵文字を切り替える。

  * **Aggressive (煽り):** `😈` `🤬` `🤡` `🤪` `😤` `🖕`
  * **Scared (怯え):** `🥶` `😱` `😰` `🏳️` `🙇` `🤢`
  * **Escape (逃亡/開き直り - レア):** `🏃` `💨` `👻`

### ② 振動アニメーション (CSS Keyframes)

「怯え」状態の際、以下のクラスを適用して\*\*「ガクブル」\*\*感を演出する。

**Tailwind設定例 (tailwind.config.js):**

```javascript
theme: {
  extend: {
    keyframes: {
      shiver: {
        '0%': { transform: 'translate(0, 0) rotate(0deg)' },
        '25%': { transform: 'translate(2px, 2px) rotate(2deg)' },
        '50%': { transform: 'translate(-2px, -2px) rotate(-2deg)' },
        '75%': { transform: 'translate(1px, -1px) rotate(1deg)' },
        '100%': { transform: 'translate(0, 0) rotate(0deg)' },
      }
    },
    animation: {
      shiver: 'shiver 0.1s infinite', // 0.1秒間隔で無限ループ＝高速振動
    }
  }
}
```

  * **適用:** `<span className="text-4xl animate-shiver">{emoji}</span>`

### ③ 開示演出 (The Hacker Effect)

「開示請求する」ボタン押下時のエフェクト。

1.  **オーバーレイ:** 画面全体に半透明の黒または赤のフィルターをかける。
2.  **ログ表示:** 該当リプライの上に、緑色のコンソール文字でダミーの特定情報を高速表示。
      * `Connecting to ISP...`
      * `IP Address: 203.0.113.5`
      * `Device: Android (Cheap model)`
      * `Location: Mom's Basement`
      * `SENDING LEGAL NOTICE... DONE.`
3.  **完了:** 1〜2秒後に演出が消え、リプライの内容と絵文字が「怯えモード」に差し替わる。

## 5\. データ構造とAPI設計 (Prompt Engineering)

APIリクエスト数を節約するため、1回の生成ですべての状態を取得する。

**System Prompt指示:**

> ユーザーの投稿に対する「悪質なクソリプ」と、それが法的手段で身元特定された瞬間の「情けない謝罪」のペアを3つ生成せよ。
> 各状態にふさわしい「絵文字」も1つずつ選定せよ。
> 出力はJSON形式のみ。

**Response JSON Schema:**

```json
{
  "replies": [
    {
      "id": "unique_id_1",
      "user_name": "通りすがりの専門家",
      "user_id": "@expert_wannabe",
      "aggressive": {
        "text": "それ科学的根拠ある？ｗ 頭悪そうｗ",
        "emoji": "🤪"
      },
      "scared": {
        "text": "すいません！適当言いました！訴訟だけは！",
        "emoji": "😱"
      },
      "escape_route": false // trueなら謝罪せずに逃亡するパターン（拡張用）
    },
    ...
  ]
}
```

## 6\. 実装ステップ（1 Day Plan）

1.  **[10:00-11:00] Setup:** Next.js環境構築、Tailwind導入。
2.  **[11:00-13:00] UI Dev:**
      * 絵文字を表示するAvatarコンポーネント作成。
      * `animate-shiver` クラスの実装と動作確認。
      * タイムラインのモック作成。
3.  **[13:00-15:00] Logic:**
      * API Route作成 (LLM呼び出し)。
      * State管理 (通常⇔開示済みの切り替え)。
4.  **[15:00-17:00] Effects:**
      * 開示ボタンを押した時の「ハッカー風ログ演出」の実装。
      * 効果音選定（あれば）。
5.  **[17:00-18:00] Ship:** Vercelデプロイ、最終調整。
