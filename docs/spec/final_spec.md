# 📜 最終仕様書：『開示請求クリッカー』

**〜その投稿、法的に詰めます〜**

## 1. プロジェクト概要

*   **コンセプト:** 理不尽なクソリプをしてくる架空のユーザーに対し、「法的措置（開示請求）」ボタンを押すことで、圧倒的な力でねじ伏せ、怯えさせるカタルシスを提供するストレス解消シミュレーター。
*   **コア体験:** **「煽り（ムカつき）」→「ボタン押下（制裁）」→「怯え・振動（スッキリ）」** という感情のジェットコースター。
*   **開発期間:** 1日（ワンデイ開発想定）

## 2. 技術スタック

*   **Frontend:** Next.js (App Router), React
*   **Styling:** Tailwind CSS (X風UI構築, アニメーション)
*   **AI:** Gemini API (Google Generative AI SDK) - `gemini-1.5-flash` 推奨 (高速・安価)
*   **Icons:** React Icons / Lucide React
*   **Avatars:** DiceBear API (URL埋め込みで即生成) または 絵文字
*   **Deployment:** Vercel

## 3. 画面・UI仕様

### A. メイン画面レイアウト
スマホ・PC両対応のシングルカラム（X/Twitter風UI）。

1.  **投稿エリア**
    *   テキストエリア + 「投稿する」ボタン（紙飛行機アイコン）。
    *   送信後、ローディング（「クソリプ収集中...」など不穏な文言）を経てタイムラインが更新される。

2.  **タイムライン（リプライリスト）**
    *   ユーザーの投稿に対し、3〜5件のクソリプが連なる。

### B. リプライアイテムの構成
各リプライは以下の要素を持つ。

| 要素 | 通常時（煽りフェーズ） | 開示請求後（屈服フェーズ） |
| :--- | :--- | :--- |
| **アイコン** | **煽り絵文字** (😈, 🤪, 😤) | **怯え絵文字** (🥶, 😱, 🥺) |
| **動き** | 静止（たまに少し揺れる程度） | **激しく振動 (Vibration)** |
| **名前** | 「裏垢男子」「ご意見番」など | (変更なし) |
| **本文** | 攻撃的で理不尽な内容 | 必死の謝罪、命乞い |
| **ボタン** | **[🚨 開示請求する]** (赤色) | **[✅ 示談成立]** (緑色・非活性) |

## 4. 演出・アニメーション仕様（重要）

### ① 絵文字の表情変化ロジック
LLMからのレスポンスに基づき、状態（State）に応じて絵文字を切り替える。
*   **Aggressive (煽り):** `😈` `🤬` `🤡` `🤪` `😤` `🖕`
*   **Scared (怯え):** `🥶` `😱` `😰` `🏳️` `🙇` `🤢`

### ② 振動アニメーション (CSS Keyframes)
「怯え」状態の際、以下のクラスを適用して**「ガクブル」**感を演出する。

**Tailwind設定例:**
```javascript
theme: {
  extend: {
    keyframes: {
      shiver: {
        '0%': { transform: 'translate(0, 0) rotate(0deg)' },
        '25%': { transform: 'translate(2px, 2px) rotate(2deg)' },
        '50%': { transform: 'translate(-2px, -2px) rotate(-2deg)' },
        '75%': { transform: 'translate(1px, -1px) rotate(1deg)' },
        '100%': { transform: 'translate(0, 0) rotate(0deg)' },
      }
    },
    animation: {
      shiver: 'shiver 0.1s infinite', // 高速振動
    }
  }
}
```

### ③ 開示演出 (The Hacker Effect)
「開示請求する」ボタン押下時のエフェクト。

1.  **オーバーレイ:** 画面全体に半透明の黒または赤のフィルターを一瞬かける。
2.  **ログ表示:** 該当リプライの上に、緑色のコンソール文字でダミーの特定情報を高速表示。
    *   `Connecting to ISP...`
    *   `IP Address: 203.0.113.5`
    *   `Device: Android (Cheap model)`
    *   `Location: Mom's Basement`
    *   `SENDING LEGAL NOTICE... DONE.`
3.  **完了:** 1〜2秒後に演出が消え、リプライの内容と絵文字が「怯えモード」に差し替わる。

## 5. データ構造とAPI設計 (Prompt Engineering)

APIリクエスト数を節約するため、1回の生成ですべての状態を取得する。

**System Prompt指示:**
> あなたは性格の悪いSNSユーザーの集団です。ユーザーの投稿に対し、理不尽で不快な「クソリプ」を3つ考えてください。
> 同時に、もし身元特定（開示請求）された場合に、情けなく許しを請う「謝罪文」も考えてください。
> 各状態にふさわしい「絵文字」も1つずつ選定せよ。
> 出力はJSON形式のみ。

**Response JSON Schema:**
```json
{
  "replies": [
    {
      "id": "unique_id_1",
      "user_name": "クソリプおじさん",
      "user_id": "@kuso_oji",
      "aggressive": {
        "text": "それ科学的根拠ある？ｗ 頭悪そうｗ",
        "emoji": "🤪"
      },
      "scared": {
        "text": "すいません！適当言いました！訴訟だけは！",
        "emoji": "😱"
      }
    },
    ...
  ]
}
```

## 6. 実装ステップ（1 Day Plan）

- 使用するライブラリ群
- 全体の流れ
  - メッセージ投稿UIとレイアウト等の基本的なUI（Xライクなチャット画面。ただしリッチすぎるのは不要。CSSも最小限でシンプルで良い）
  - 送信するとクソリプ3件がtimesleep: 1sくらいで順に表示されるときのUI（この間は開示請求が不可能にして、返信メッセージとアカウント情報等はダミーで良い）
  - 開示請求ボタンと解析ログ風UIの実装（IPアドレス取得中などのやつ）
  - クソリプ犯のリプライメッセージUIの表示（ダミーで良い）
- GEMINI APIとの連携
  - クソリプの生成＆ページ上へのデータ同期
  - 謝罪メッセージの生成＆コンポーネントへの同期

## 7. 拡張アイデア（Optional）

*   **「許さない」モード:** 謝罪後さらに「追撃」ボタンでアカウント削除まで追い込む。
*   **シェア機能:** 「○○さんの投稿が3件のクソリプを撃退し、示談金90万円を獲得しました」画像を生成。
  * canvas要素で作成し、OGPに設定。
